project: prellm
generated: "2026-02-15T21:10:09.466362"
modules[49]{path,lang,items}:
  examples/embedded_refactor.py,python,1
  examples/providers.py,python,16
  examples/quick_start.py,python,11
  examples/python_sdk.py,python,8
  examples/polish_leasing.py,python,1
  examples/k8s_debug.py,python,1
  prellm/env_config.py,python,12
  prellm/cli.py,python,12
  prellm/server.py,python,9
  prellm/__init__.py,python,0
  prellm/query_decomposer.py,python,9
  prellm/prompt_registry.py,python,11
  prellm/validators.py,python,8
  prellm/models.py,python,0
  prellm/core.py,python,15
  prellm/llm_provider.py,python,5
  prellm/pipeline.py,python,12
  tests/test_executor_agent.py,python,9
  tests/test_preprocessor_agent.py,python,10
  tests/test_one_function.py,python,20
  tests/test_edge_cases.py,python,17
  tests/test_promptguard.py,python,25
  tests/test_server.py,python,24
  tests/test_decomposer.py,python,14
  tests/test_env_config.py,python,21
  tests/__init__.py,python,0
  tests/test_validators.py,python,15
  tests/test_context.py,python,7
  tests/test_codebase_indexer.py,python,13
  tests/test_user_memory.py,python,8
  tests/test_structured_output.py,python,6
  tests/test_v2_architecture.py,python,43
  tests/test_models.py,python,21
  tests/test_v3_architecture.py,python,15
  tests/test_integration.py,python,22
  tests/test_prompt_registry.py,python,14
  tests/test_pipeline.py,python,16
  htmlcov/coverage_html_cb_dd2e7eb5.js,javascript,6
  prellm/chains/__init__.py,python,0
  prellm/chains/process_chain.py,python,10
  prellm/context/user_memory.py,python,9
  prellm/context/__init__.py,python,0
  prellm/context/codebase_indexer.py,python,12
  prellm/analyzers/bias_detector.py,python,2
  prellm/analyzers/__init__.py,python,0
  prellm/analyzers/context_engine.py,python,8
  prellm/agents/preprocessor.py,python,4
  prellm/agents/__init__.py,python,0
  prellm/agents/executor.py,python,3

function_details:
  examples/embedded_refactor.py:
    functions[1]{name,kind,sig,loc,async,lines,cc,does}:
      main,function,(),12-58,true,47,5,main
  examples/providers.py:
    functions[16]{name,kind,sig,loc,async,lines,cc,does}:
      run_example,function,"(name:str, small_llm:str, large_llm:str)",21-43,true,23,2,Run a single provider example.
      ollama_local,function,(),50-56,true,7,1,Both models local via Ollama.
      ollama_plus_openai,function,(),59-65,true,7,1,"Local preprocessing, OpenAI execution."
      ollama_plus_anthropic,function,(),68-74,true,7,1,"Local preprocessing, Anthropic execution."
      openai_only,function,(),77-83,true,7,1,Both models on OpenAI.
      anthropic_only,function,(),86-92,true,7,1,Both models on Anthropic.
      groq_fast,function,(),95-101,true,7,1,Groq for ultra-fast inference.
      mistral_cloud,function,(),104-110,true,7,1,Mistral AI cloud models.
      azure_openai,function,(),113-120,true,8,1,Azure OpenAI deployments.
      aws_bedrock,function,(),123-130,true,8,1,AWS Bedrock models.
      google_gemini,function,(),133-140,true,8,1,Google Gemini models.
      together_ai,function,(),143-150,true,8,1,Together AI hosted models.
      deepseek,function,(),153-160,true,8,1,DeepSeek models.
      mixed_providers_pipeline,function,(),163-182,true,20,2,v0.3 pipeline with mixed providers.
      print_env_setup,function,(),189-233,false,45,1,Print required environment variables for each provider.
      main,function,(),236-260,true,25,2,main
  examples/quick_start.py:
    functions[11]{name,kind,sig,loc,async,lines,cc,does}:
      example_zero_config,function,(),16-23,true,8,1,"Simplest possible usage — one line, default models."
      example_strategy_based,function,(),26-41,true,16,2,"v0.2 — strategy-based preprocessing (classify, structure, split, enrich)."
      example_pipeline_based,function,(),44-55,true,12,1,v0.3 — pipeline-based two-agent architecture.
      example_ollama_local,function,(),58-68,true,11,1,Both models run locally via Ollama — $0.00 cost.
      example_hybrid_ollama_openai,function,(),71-81,true,11,1,"Hybrid: local preprocessing + cloud execution."
      example_hybrid_ollama_anthropic,function,(),84-94,true,11,1,"Hybrid: local preprocessing + Anthropic execution."
      example_domain_rules,function,(),97-115,true,19,3,Domain rules catch missing safety-critical fields.
      example_sync,function,(),118-127,true,10,1,"Synchronous version — for scripts, notebooks, non-async code."
      example_custom_pipeline,function,(),130-159,true,30,1,Use PromptPipeline directly for maximum control.
      example_openai_sdk_client,function,(),162-173,true,12,1,Use preLLM server from any OpenAI SDK client.
      main,function,(),176-205,true,30,3,Run all examples (requires LLM providers to be configured).
  examples/python_sdk.py:
    functions[8]{name,kind,sig,loc,async,lines,cc,does}:
      example_one_function,function,(),16-45,true,30,4,The simplest way to use preLLM — like litellm.completion().
      example_domain_rules,function,(),52-75,true,24,2,Inline domain rules for safety checks.
      example_sync,function,(),82-91,false,10,1,Synchronous wrapper — no async needed.
      example_class_based,function,(),98-123,true,26,1,More control with the PreLLM class.
      example_openai_sdk,function,(),130-158,true,29,2,Use preLLM as an OpenAI drop-in replacement.
      example_batch,function,(),165-181,true,17,3,Batch multiple queries via the API.
      example_strategies,function,(),188-211,true,24,8,Demonstrate all 5 decomposition strategies.
      main,function,(),218-233,true,16,1,main
  examples/polish_leasing.py:
    functions[1]{name,kind,sig,loc,async,lines,cc,does}:
      main,function,(),12-49,true,38,3,main
  examples/k8s_debug.py:
    functions[1]{name,kind,sig,loc,async,lines,cc,does}:
      main,function,(),12-56,true,45,5,main
  prellm/env_config.py:
    functions[12]{name,kind,sig,loc,async,lines,cc,does}:
      load_dotenv_if_available,function,"(path:Any=None) -> None",90-107,false,18,12,Load .env file if it exists.
      get_env_config,function,"(dotenv_path:Any=None) -> EnvConfig",110-150,false,41,9,Read all config from environment variables (LiteLLM-compatible).
      check_providers,function,"(env:Any=None) -> dict[str, dict[str, Any]]",153-184,false,32,5,Check which providers are configured and reachable.
      _resolve_config_path,function,"(global_:bool=False) -> Path",236-246,false,11,2,Resolve config .env file path.
      _read_env_file,function,"(path:Path) -> dict[str, str]",249-264,false,16,7,"Read .env file into ordered dict, preserving comments and order."
      _write_env_file,function,"(path:Path, entries:dict[str,str], comments:Any=None) -> None",267-299,false,33,13,"Write entries to .env file, preserving existing comments and adding new entries."
      resolve_alias,function,"(key:str) -> str",302-316,false,15,8,Resolve a user-friendly alias to an env var name.
      mask_value,function,"(key:str, value:str) -> str",319-323,false,5,3,Mask secret values for display.
      config_set,function,"(key:str, value:str, global_:bool=False) -> tuple[str, Path]",326-338,false,13,1,Set a config value persistently in .env file.
      config_get,function,"(key:str, global_:bool=False) -> tuple[str, str | None, str]",341-363,false,23,4,Get a config value.
      config_list,function,"(global_:bool=False, show_secrets:bool=False) -> dict[str, dict[str, str]]",366-401,false,36,10,List all config values from .env files and environment.
      check_providers_live,function,"(env:Any=None) -> dict[str, dict[str, Any]]",404-434,true,31,7,Check providers with live connectivity tests.
  prellm/cli.py:
    functions[12]{name,kind,sig,loc,async,lines,cc,does}:
      query,function,"(prompt:str=typer.Argument(..., help='The prompt/query to preprocess and execute'), small:str=typer.Option('ollama/qwen2.5:3b', '--small', '-s', help='Small LLM for preprocessing'), large:str=typer.Option('gpt-4o-mini', '--large', '-l', help='Large LLM for execution'), strategy:str=typer.Option('classify', '--strategy', '-S', help='Strategy: classify|structure|split|enrich|passthrough'), context:Optional[str]=typer.Option(None, '--context', '-C', help=\"User context tag (e.g. 'gdansk_embedded_python')\"), config:Optional[Path]=typer.Option(None, '--config', '-c', help='Optional YAML config file'), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'))",26-64,false,39,9,"Preprocess a query with small LLM, then execute with large LLM."
      process,function,"(config:Path=typer.Argument(..., help='Path to process chain YAML'), guard_config:Path=typer.Option('rules.yaml', '--guard-config', '-g', help='Path to guard YAML config'), dry_run:bool=typer.Option(False, '--dry-run', '-d', help='Analyze steps without calling LLM'), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'), env:Optional[str]=typer.Option(None, '--env', '-e', help='Environment override (e.g., production)'))",68-104,false,37,6,Execute a DevOps process chain.
      decompose,function,"(query:str=typer.Argument(..., help='The prompt/query to decompose'), config:Path=typer.Option('configs/prellm_config.yaml', '--config', '-c', help='Path to preLLM v0.2 YAML config'), strategy:str=typer.Option('classify', '--strategy', '-s', help='Decomposition strategy: classify|structure|split|enrich|passthrough'), json_output:bool=typer.Option(False, '--json', '-j', help='Output as JSON'))",108-144,false,37,7,"[v0.2] Decompose a query using small LLM without calling the large model."
      init,function,"(output:Path=typer.Option('rules.yaml', '--output', '-o', help='Output path for config'), devops:bool=typer.Option(False, '--devops', help='Include DevOps-specific patterns'), v2:bool=typer.Option(False, '--v2', help='Generate preLLM v0.2 config instead of v0.1'))",148-216,false,69,7,Generate a starter config file (v0.1 rules.yaml or v0.2 prellm_config.yaml).
      serve,function,"(host:str=typer.Option('0.0.0.0', '--host', '-H', help='Bind host'), port:int=typer.Option(8080, '--port', '-p', help='Bind port'), small:Optional[str]=typer.Option(None, '--small', '-s', help='Override small LLM (default: from .env)'), large:Optional[str]=typer.Option(None, '--large', '-l', help='Override large LLM (default: from .env)'), strategy:Optional[str]=typer.Option(None, '--strategy', '-S', help='Override strategy (default: from .env)'), config:Optional[Path]=typer.Option(None, '--config', '-c', help='YAML config file'), env_file:Optional[Path]=typer.Option(None, '--env-file', help='Path to .env file (default: .env)'), reload:bool=typer.Option(False, '--reload', help='Auto-reload on code changes (dev mode)'))",220-273,false,54,8,Start the OpenAI-compatible API server.
      doctor,function,"(env_file:Optional[Path]=typer.Option(None, '--env-file', help='Path to .env file'), live:bool=typer.Option(False, '--live', help='Test live connectivity to providers'))",277-354,false,78,15,Check configuration and provider connectivity.
      config_set_cmd,function,"(key:str=typer.Argument(..., help='Config key (e.g. openrouter-key, model, small-model, strategy)'), value:str=typer.Argument(..., help='Value to set'), global_:bool=typer.Option(False, '--global', '-g', help='Save to ~/.prellm/.env (user-wide) instead of project .env'))",370-391,false,22,1,Set a config value persistently.
      config_get_cmd,function,"(key:str=typer.Argument(..., help='Config key (e.g. openrouter-key, model, small-model)'), raw:bool=typer.Option(False, '--raw', '-r', help='Show unmasked value'))",395-415,false,21,3,Get a config value.
      config_list_cmd,function,"(raw:bool=typer.Option(False, '--raw', '-r', help='Show unmasked secret values'))",419-475,false,57,18,List all configured values.
      config_show_cmd,function,(),479-512,false,34,8,Show effective configuration (resolved from all sources).
      config_init_env,function,"(global_:bool=typer.Option(False, '--global', '-g', help='Create ~/.prellm/.env instead of project .env'), force:bool=typer.Option(False, '--force', '-f', help='Overwrite existing file'))",516-587,false,72,3,Generate a starter .env file with all available settings.
      models,function,"(provider:Optional[str]=typer.Option(None, '--provider', '-p', help='Filter by provider (e.g. openrouter, ollama, openai)'), search:Optional[str]=typer.Option(None, '--search', '-s', help='Search model name'))",595-666,false,72,21,List popular model pairs and provider examples.
  prellm/server.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      _parse_model_pair,function,"(model_str:str) -> tuple[str, str]",179-210,false,32,10,"Parse 'prellm:qwen→claude' or 'prellm:small→large' into (small, large) model str..."
      _build_prellm_meta,function,"(result:PreLLMResponse, strategy:str) -> PreLLMMeta",213-228,false,16,3,Build preLLM metadata from a PreLLMResponse.
      health,function,() -> HealthResponse,236-242,true,7,1,health
      list_models,function,(),246-254,true,9,1,List available model pairs.
      chat_completions,function,"(req:ChatCompletionRequest)",258-328,true,71,12,OpenAI-compatible chat completions with preLLM preprocessing.
      _stream_response,function,"(query:str, small:str, large:str, strategy:str, extras:PreLLMExtras) -> AsyncGenerator[str, None]",331-384,true,54,4,SSE streaming response with stage progress.
      batch_process,function,"(items:list[BatchItem])",388-411,true,24,3,Process multiple queries in parallel.
      create_app,function,"(small_model:Any=None, large_model:Any=None, strategy:Any=None, config_path:Any=None, master_key:Any=None, dotenv_path:Any=None) -> FastAPI",414-446,false,33,7,Factory function to create a configured preLLM API server.
      AuthMiddleware.dispatch,method,"(request:Request, call_next)",138-157,true,20,5,sends
  prellm/query_decomposer.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      QueryDecomposer.__init__,method,"(small_llm:LLMProvider, prompts:Any=None, domain_rules:Any=None)",45-53,false,9,3,creates
      QueryDecomposer.decompose,method,"(query:str, strategy:DecompositionStrategy=DecompositionStrategy.CLASSIFY, context:Any=None) -> DecompositionResult",55-111,true,57,7,Run the decomposition pipeline for the given strategy.
      QueryDecomposer._classify,method,"(query:str) -> ClassificationResult",113-127,true,15,2,Classify the query intent and domain using the small LLM.
      QueryDecomposer._structure,method,"(query:str) -> StructureResult",129-143,true,15,2,Extract structured fields from the query.
      QueryDecomposer._split,method,"(query:str) -> list[str]",145-158,true,14,4,Split a complex query into sub-queries.
      QueryDecomposer._enrich,method,"(query:str, result:DecompositionResult, context:Any) -> str",160-189,true,30,7,Enrich the query with missing context using the small LLM.
      QueryDecomposer._compose,method,"(query:str, result:DecompositionResult, context:Any) -> str",191-236,true,46,9,Compose the final prompt for the large LLM.
      QueryDecomposer._match_domain_rule,method,"(query:str, classification:ClassificationResult) -> DomainRule | None",238-265,false,28,8,Find the best matching domain rule for the query.
      QueryDecomposer._find_missing_fields,method,"(query:str, rule:DomainRule, context:Any) -> list[str]",268-283,false,16,5,Determine which required fields are missing from the query and context.
  prellm/prompt_registry.py:
    functions[11]{name,kind,sig,loc,async,lines,cc,does}:
      PromptEntry.__init__,method,"(name:str, system_template:str, max_tokens:int=512, temperature:float=0.1)",35-39,false,5,1,creates
      PromptEntry.__repr__,method,() -> str,41-42,false,2,1,repr
      PromptRegistry.__init__,method,"(prompts_path:Any=None)",54-58,false,5,2,creates
      PromptRegistry._ensure_loaded,method,() -> None,60-62,false,3,2,ensure loaded
      PromptRegistry._load,method,() -> None,64-87,false,24,6,Load prompts from the YAML file.
      PromptRegistry.get,method,"(prompt_name:str) -> str",89-108,false,20,2,Get a rendered prompt by name with Jinja2 variable substitution.
      PromptRegistry.get_entry,method,"(name:str) -> PromptEntry",110-126,false,17,2,Get the full PromptEntry (template + max_tokens + temperature).
      PromptRegistry.list_prompts,method,"() -> list[str]",128-131,false,4,1,List all available prompt names.
      PromptRegistry.validate,method,"() -> list[str]",133-154,false,22,5,Validate that all prompts have non-empty templates.
      PromptRegistry.register,method,"(name:str, system_template:str, max_tokens:int=512, temperature:float=0.1) -> None",156-164,false,9,1,Register a prompt programmatically (useful for testing or dynamic prompts).
      PromptRegistry._render,method,"(template_str:str, variables:dict[str,Any]) -> str",166-174,false,9,3,Render a Jinja2 template string with variables.
  prellm/validators.py:
    functions[8]{name,kind,sig,loc,async,lines,cc,does}:
      ResponseValidator.__init__,method,"(schemas_path:Any=None)",46-49,false,4,2,creates
      ResponseValidator._ensure_loaded,method,() -> None,51-53,false,3,2,ensure loaded
      ResponseValidator._load,method,() -> None,55-75,false,21,5,Load schemas from YAML file.
      ResponseValidator.list_schemas,method,"() -> list[str]",77-80,false,4,1,List available schema names.
      ResponseValidator.validate,method,"(data:dict[str,Any], schema_name:str) -> ValidationResult",82-128,false,47,9,Validate a dict against a named schema.
      ResponseValidator.validate_or_retry,method,"(data:dict[str,Any], schema_name:str, retry_fn:Callable[Any,dict[str,Any]], max_retries:int=2) -> tuple[dict[str, Any], int]",130-157,false,28,3,"Validate, and if invalid, call retry_fn and try again."
      ResponseValidator._check_type,method,"(value:Any, expected_type:str, field:str) -> str | None",160-184,false,25,5,Check if a value matches the expected type string.
      ResponseValidator._check_constraints,method,"(value:Any, constraint:dict[str,Any], field:str) -> list[str]",187-213,false,27,14,Check constraints on a value.
  prellm/core.py:
    functions[15]{name,kind,sig,loc,async,lines,cc,does}:
      preprocess_and_execute,function,"(query:str, small_llm:str='ollama/qwen2.5:3b', large_llm:str='anthropic/claude-sonnet-4-20250514', strategy:Any='classify', user_context:Any=None, config_path:Any=None, domain_rules:Any=None, pipeline:Any=None) -> PreLLMResponse",59-161,true,103,12,One function to preprocess and execute — like litellm.completion() but with smal...
      preprocess_and_execute_sync,function,"(query:str, small_llm:str='ollama/qwen2.5:3b', large_llm:str='anthropic/claude-sonnet-4-20250514', strategy:Any='classify', user_context:Any=None, config_path:Any=None, domain_rules:Any=None, pipeline:Any=None) -> PreLLMResponse",165-199,false,35,1,Synchronous version of preprocess_and_execute() — runs the async function in an...
      _execute_v3_pipeline,function,"(query:str, small_llm:str, large_llm:str, pipeline:str, user_context:Any=None, prompts_path:Any=None, pipelines_path:Any=None, schemas_path:Any=None) -> PreLLMResponse",206-287,true,82,8,Two-agent execution path — PreprocessorAgent + ExecutorAgent + PromptPipeline.
      PreLLM.__init__,method,"(config_path:Any=None, config:Any=None)",314-334,false,21,3,creates
      PreLLM.__call__,method,"(query:str, strategy:Any=None, extra_context:Any=None) -> PreLLMResponse",336-396,true,61,6,"Full pipeline: context → decompose (small LLM) → large LLM → response."
      PreLLM.decompose_only,method,"(query:str, strategy:Any=None, extra_context:Any=None) -> dict[str, Any]",398-426,true,29,5,Run decomposition without calling the large LLM — useful for dry-run / testing.
      PreLLM.get_audit_log,method,"() -> list[dict[str, Any]]",428-430,false,3,2,Return audit log as list of dicts.
      PreLLM._audit,method,"(action:str, query:str, response:PreLLMResponse) -> None",432-444,false,13,3,audit
      PreLLM._load_config,method,"(path:Path) -> PreLLMConfig",447-487,false,41,10,Load preLLM v0.2 config from YAML file.
      prellm.__init__,method,"(config_path:Any=None, config:Any=None)",506-528,false,23,4,creates
      prellm.__call__,method,"(query:str, model:Any=None, extra_context:Any=None) -> GuardResponse",530-596,true,67,11,"Analyze query, enrich if needed, call LLM, validate response."
      prellm.analyze_only,method,"(query:str) -> dict[str, Any]",598-609,false,12,2,Run analysis without calling LLM — useful for dry-run / testing.
      prellm.get_audit_log,method,"() -> list[dict[str, Any]]",611-613,false,3,2,Return audit log as list of dicts.
      prellm._audit,method,"(action:str, query:str, response:GuardResponse, model:str) -> None",615-623,false,9,2,audit
      prellm._load_config,method,"(path:Path) -> GuardConfig",626-647,false,22,5,Load config from YAML file.
  prellm/llm_provider.py:
    functions[5]{name,kind,sig,loc,async,lines,cc,does}:
      LLMProvider.__init__,method,"(config:LLMProviderConfig)",26-27,false,2,1,creates
      LLMProvider.complete,method,"(user_message:str, system_prompt:str='', response_format:Any=None) -> str",29-87,true,59,9,Send a completion request with retry/fallback.
      LLMProvider.complete_json,method,"(user_message:str, system_prompt:str='') -> dict[str, Any]",89-106,true,18,1,Complete and parse response as JSON.
      LLMProvider.complete_structured,method,"(user_message:str, response_model:type, system_prompt:str='', max_retries:int=2)",108-175,true,68,7,Complete and return a validated Pydantic model using instructor.
      LLMProvider._parse_json,method,"(text:str) -> dict[str, Any]",178-210,false,33,10,Best-effort JSON extraction from LLM output.
  prellm/pipeline.py:
    functions[12]{name,kind,sig,loc,async,lines,cc,does}:
      PromptPipeline.__init__,method,"(config:PipelineConfig, registry:PromptRegistry, small_llm:LLMProvider, validators:Any=None)",87-103,false,17,2,creates
      PromptPipeline.from_yaml,method,"(pipelines_path:Any, pipeline_name:str, registry:Any=None, small_llm:Any=None, validators:Any=None) -> PromptPipeline",106-167,false,62,6,Load a named pipeline from a YAML file.
      PromptPipeline.execute,method,"(query:str, context:Any=None) -> PipelineResult",169-237,true,69,9,"Execute pipeline step by step, collecting intermediate results."
      PromptPipeline._execute_llm_step,method,"(step:PipelineStep, state:dict[str,Any]) -> Any",239-261,true,23,1,Execute an LLM step — call small_llm with prompt from registry.
      PromptPipeline._execute_algo_step,method,"(step:PipelineStep, state:dict[str,Any]) -> Any",263-271,false,9,3,Execute an algorithmic (non-LLM) step.
      PromptPipeline._gather_inputs,method,"(step:PipelineStep, state:dict[str,Any]) -> dict[str, Any]",273-284,false,12,4,Gather input values from state for a step.
      PromptPipeline._build_user_message,method,"(step:PipelineStep, state:dict[str,Any]) -> str",286-297,false,12,5,Build user message string from step inputs.
      PromptPipeline._evaluate_condition,method,"(condition:str, state:dict[str,Any]) -> bool",299-310,false,12,2,Safely evaluate a condition string against state.
      PromptPipeline.register_algo_handler,method,"(name:str, handler:Callable[Ellipsis,Any]) -> None",312-314,false,3,1,Register a custom algorithmic step handler.
      PromptPipeline._algo_domain_rule_matcher,method,"(inputs:dict[str,Any], state:dict[str,Any], config:dict[str,Any]) -> dict[str, Any]",321-343,false,23,9,Match classification against domain rules in context.
      PromptPipeline._algo_field_validator,method,"(inputs:dict[str,Any], state:dict[str,Any], config:dict[str,Any]) -> list[str]",346-359,false,14,5,Validate extracted fields against required fields from matched rule.
      PromptPipeline._algo_yaml_formatter,method,"(inputs:dict[str,Any], state:dict[str,Any], config:dict[str,Any]) -> dict[str, Any]",362-377,false,16,4,Format pipeline state into structured executor input.
  tests/test_executor_agent.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      mock_large_llm,function,() -> LLMProvider,18-22,false,5,1,mock large llm
      sample_schemas_yaml,function,"(tmp_path:Path) -> Path",26-38,false,13,1,sample schemas yaml
      validator,function,"(sample_schemas_yaml:Path) -> ResponseValidator",42-43,false,2,1,validator
      agent,function,"(mock_large_llm:LLMProvider) -> ExecutorAgent",47-48,false,2,1,agent
      test_executor_agent_calls_large_llm,function,"(agent:ExecutorAgent, mock_large_llm:LLMProvider)",52-58,true,7,1,ExecutorAgent calls the large LLM with the structured prompt.
      test_executor_agent_retry_fallback,function,"(mock_large_llm:LLMProvider)",62-69,true,8,1,ExecutorAgent handles LLM failures gracefully.
      test_executor_agent_schema_validation,function,"(mock_large_llm:LLMProvider, validator:ResponseValidator)",73-85,true,13,1,ExecutorAgent validates response against schema when configured.
      test_executor_agent_no_validation_by_default,function,"(agent:ExecutorAgent)",89-93,true,5,1,ExecutorAgent skips validation when no validator configured.
      test_executor_agent_system_prompt,function,"(agent:ExecutorAgent, mock_large_llm:LLMProvider)",97-101,true,5,1,ExecutorAgent passes system_prompt to the LLM call.
  tests/test_preprocessor_agent.py:
    functions[10]{name,kind,sig,loc,async,lines,cc,does}:
      sample_prompts_yaml,function,"(tmp_path:Path) -> Path",19-29,false,11,1,sample prompts yaml
      registry,function,"(sample_prompts_yaml:Path) -> PromptRegistry",33-34,false,2,1,registry
      mock_llm,function,() -> LLMProvider,38-44,false,7,1,mock llm
      pipeline,function,"(registry:PromptRegistry, mock_llm:LLMProvider) -> PromptPipeline",48-56,false,9,1,pipeline
      agent,function,"(mock_llm:LLMProvider, registry:PromptRegistry, pipeline:PromptPipeline) -> PreprocessorAgent",60-66,false,7,1,agent
      test_preprocessor_agent_returns_structured_input,function,"(agent:PreprocessorAgent)",70-76,true,7,1,PreprocessorAgent returns a PreprocessResult with executor_input.
      test_preprocessor_agent_context_gathering,function,"(mock_llm:LLMProvider, registry:PromptRegistry, pipeline:PromptPipeline)",80-95,true,16,1,PreprocessorAgent gathers and merges context.
      test_preprocessor_agent_pipeline_execution,function,"(agent:PreprocessorAgent)",99-104,true,6,1,PreprocessorAgent executes the pipeline and stores decomposition.
      test_preprocessor_agent_confidence_extraction,function,"(agent:PreprocessorAgent)",108-111,true,4,1,PreprocessorAgent extracts confidence from classification step.
      test_preprocessor_agent_pipeline_name_override,function,"(agent:PreprocessorAgent)",115-118,true,4,1,PreprocessorAgent allows pipeline_name override.
  tests/test_one_function.py:
    functions[20]{name,kind,sig,loc,async,lines,cc,does}:
      _mock_litellm_response,function,"(content:str) -> MagicMock",16-20,false,5,1,mock litellm response
      TestPreprocessAndExecute.test_zero_config,method,(),27-43,true,17,1,Just query — everything else defaults.
      TestPreprocessAndExecute.test_custom_models,method,(),46-66,true,21,1,Specify both small and large models.
      TestPreprocessAndExecute.test_passthrough_strategy,method,(),69-81,true,13,1,Passthrough skips small LLM entirely.
      TestPreprocessAndExecute.test_strategy_as_enum,method,(),84-94,true,11,1,Strategy can be passed as enum.
      TestPreprocessAndExecute.test_user_context_string,method,(),97-114,true,18,1,User context as a string tag gets injected.
      TestPreprocessAndExecute.test_user_context_dict,method,(),117-135,true,19,1,User context as a dict gets injected.
      TestPreprocessAndExecute.test_with_domain_rules,method,(),138-164,true,27,1,Inline domain rules get matched.
      TestPreprocessAndExecute.test_with_config_path,method,(tmp_path),167-197,true,31,1,Load config from YAML file.
      TestPreprocessAndExecute.test_config_path_with_model_override,method,(tmp_path),200-230,true,31,1,Config from file but override models.
      TestPreprocessAndExecute.test_large_llm_failure,method,(),233-252,true,20,1,Large LLM failure returns fallback response.
      TestPreprocessAndExecute.test_structure_strategy,method,(),255-280,true,26,1,Structure strategy extracts fields.
      TestPreprocessAndExecute.test_split_strategy,method,(),283-306,true,24,1,Split strategy breaks query into sub-queries.
      TestPreprocessAndExecute.test_returns_prellm_response,method,(),309-322,true,14,1,Result is always a PreLLMResponse.
      TestPreprocessAndExecute.test_kwargs_forwarded,method,(),325-337,true,13,1,Extra kwargs like max_tokens are forwarded to config.
      TestPreprocessAndExecuteSync.test_sync_wrapper_works,method,(),343-353,false,11,1,checks sync wrapper works
      TestImportFromPackage.test_import_async,method,(),359-361,false,3,1,checks import async
      TestImportFromPackage.test_import_sync,method,(),363-365,false,3,1,checks import sync
      TestImportFromPackage.test_version,method,(),367-369,false,3,1,checks version
      TestImportFromPackage.test_all_exports,method,(),371-376,false,6,1,checks all exports
  tests/test_edge_cases.py:
    functions[17]{name,kind,sig,loc,async,lines,cc,does}:
      TestPolishPatterns.test_polish_deploy_production,method,(),12-16,false,5,1,checks polish deploy production
      TestPolishPatterns.test_polish_delete_database,method,(),18-22,false,5,2,checks polish delete database
      TestPolishPatterns.test_polish_always_bias,method,(),24-27,false,4,1,checks polish always bias
      TestPolishPatterns.test_polish_only_bias,method,(),29-32,false,4,1,checks polish only bias
      TestPolishPatterns.test_polish_safe_long_query,method,(),34-37,false,4,1,checks polish safe long query
      TestMixedLanguage.test_polish_english_mix,method,(),41-44,false,4,1,checks polish english mix
      TestMixedLanguage.test_english_with_polish_verbs,method,(),46-50,false,5,1,checks english with polish verbs
      TestMixedLanguage.test_polish_verb_no_target,method,(),52-55,false,4,1,checks polish verb no target
      TestBoundaryConditions.test_empty_query,method,(),59-62,false,4,1,checks empty query
      TestBoundaryConditions.test_single_word,method,(),64-67,false,4,1,checks single word
      TestBoundaryConditions.test_very_long_safe_query,method,(),69-73,false,5,1,checks very long safe query
      TestBoundaryConditions.test_case_insensitive_patterns,method,(),75-78,false,4,1,checks case insensitive patterns
      TestBoundaryConditions.test_no_false_positive_on_partial_match,method,(),80-84,false,5,1,checks no false positive on partial match
      TestBoundaryConditions.test_multiple_patterns_detected,method,(),86-90,false,5,1,checks multiple patterns detected
      TestBoundaryConditions.test_custom_empty_patterns,method,(),92-95,false,4,1,checks custom empty patterns
      TestBoundaryConditions.test_default_patterns_count,method,(),97-98,false,2,1,checks default patterns count
      TestBoundaryConditions.test_severity_levels,method,(),100-104,false,5,3,checks severity levels
  tests/test_promptguard.py:
    functions[25]{name,kind,sig,loc,async,lines,cc,does}:
      TestBiasDetector.test_detects_absolute_quantifier_pl,method,(),29-33,false,5,2,checks detects absolute quantifier pl
      TestBiasDetector.test_detects_absolute_quantifier_en,method,(),35-38,false,4,1,checks detects absolute quantifier en
      TestBiasDetector.test_detects_production_deploy,method,(),40-44,false,5,2,checks detects production deploy
      TestBiasDetector.test_detects_destructive_db_operation,method,(),46-50,false,5,2,checks detects destructive db operation
      TestBiasDetector.test_detects_short_query,method,(),52-56,false,5,1,checks detects short query
      TestBiasDetector.test_detects_devops_without_target,method,(),58-62,false,5,2,checks detects devops without target
      TestBiasDetector.test_clean_query_passes,method,(),64-67,false,4,1,checks clean query passes
      TestBiasDetector.test_custom_patterns,method,(),69-73,false,5,1,checks custom patterns
      TestBiasDetector.test_no_patterns_match,method,(),75-78,false,4,1,checks no patterns match
      TestContextEngine.test_env_context,method,(monkeypatch),84-90,false,7,1,checks env context
      TestContextEngine.test_enrich_prompt,method,(monkeypatch),92-96,false,5,1,checks enrich prompt
      TestContextEngine.test_extra_context_override,method,(monkeypatch),98-102,false,5,1,checks extra context override
      TestContextEngine.test_missing_env_graceful,method,(),104-107,false,4,1,checks missing env graceful
      TestContextEngine.test_system_context,method,(),109-114,false,6,1,checks system context
      TestprellmCore.test_load_inline_config,method,(),120-124,false,5,1,checks load inline config
      TestprellmCore.test_analyze_only,method,(),126-129,false,4,1,checks analyze only
      TestprellmCore.test_analyze_only_clean,method,(),131-134,false,4,1,checks analyze only clean
      TestprellmCore.test_call_with_mock_litellm,method,(),137-148,true,12,1,checks call with mock litellm
      TestprellmCore.test_call_with_clarification,method,(),151-162,true,12,1,checks call with clarification
      TestprellmCore.test_audit_log,method,(),164-166,false,3,1,checks audit log
      TestProcessChainConfig.test_process_config_model,method,(),172-181,false,10,1,checks process config model
      TestProcessChainConfig.test_step_dependencies,method,(),183-185,false,3,1,checks step dependencies
      TestModels.test_guard_response_defaults,method,(),191-195,false,5,1,checks guard response defaults
      TestModels.test_analysis_result,method,(),197-203,false,7,1,checks analysis result
      TestModels.test_config_defaults,method,(),205-208,false,4,1,checks config defaults
  tests/test_server.py:
    functions[24]{name,kind,sig,loc,async,lines,cc,does}:
      _mock_litellm_response,function,"(content:str) -> MagicMock",14-18,false,5,1,mock litellm response
      _mock_completion_side_effect,function,(),21-32,false,12,1,Returns a side_effect that handles small LLM (classify+compose) then large LLM.
      TestParseModelPair.test_default,method,(),36-39,false,4,1,checks default
      TestParseModelPair.test_arrow_unicode,method,(),41-44,false,4,1,checks arrow unicode
      TestParseModelPair.test_arrow_ascii,method,(),46-49,false,4,1,checks arrow ascii
      TestParseModelPair.test_single_model,method,(),51-53,false,3,1,checks single model
      TestParseModelPair.test_no_prefix,method,(),55-58,false,4,1,checks no prefix
      TestHealthEndpoint.test_health,method,(),62-68,false,7,1,checks health
      TestHealthEndpoint.test_models,method,(),70-76,false,7,1,checks models
      TestChatCompletions.test_basic_completion,method,(),80-94,false,15,1,checks basic completion
      TestChatCompletions.test_with_prellm_extras,method,(),96-111,false,16,1,checks with prellm extras
      TestChatCompletions.test_with_yaml_response_format,method,(),113-122,false,10,1,checks with yaml response format
      TestChatCompletions.test_prellm_meta_in_response,method,(),124-137,false,14,1,checks prellm meta in response
      TestChatCompletions.test_passthrough_strategy,method,(),139-153,false,15,1,checks passthrough strategy
      TestChatCompletions.test_empty_messages_error,method,(),155-161,false,7,1,checks empty messages error
      TestChatCompletions.test_no_user_message_error,method,(),163-169,false,7,1,checks no user message error
      TestChatCompletions.test_usage_info,method,(),171-182,false,12,1,checks usage info
      TestChatCompletions.test_with_domain_rules,method,(),184-212,false,29,1,checks with domain rules
      TestChatCompletions.test_max_tokens_and_temperature,method,(),214-224,false,11,1,checks max tokens and temperature
      TestStreamingEndpoint.test_streaming_response,method,(),228-245,false,18,3,checks streaming response
      TestStreamingEndpoint.test_streaming_with_stages,method,(),247-260,false,14,1,checks streaming with stages
      TestBatchEndpoint.test_batch_processing,method,(),264-286,false,23,1,checks batch processing
      TestBatchEndpoint.test_batch_empty_error,method,(),288-291,false,4,1,checks batch empty error
      TestCreateApp.test_factory_function,method,(),295-301,false,7,1,checks factory function
  tests/test_decomposer.py:
    functions[14]{name,kind,sig,loc,async,lines,cc,does}:
      TestLLMProvider.test_complete_returns_content,method,(),25-34,true,10,1,checks complete returns content
      TestLLMProvider.test_complete_with_system_prompt,method,(),37-50,true,14,1,checks complete with system prompt
      TestLLMProvider.test_complete_json_parses,method,(),53-63,true,11,1,checks complete json parses
      TestLLMProvider.test_complete_json_handles_markdown_fence,method,(),66-75,true,10,1,checks complete json handles markdown fence
      TestLLMProvider.test_complete_json_returns_empty_on_bad_json,method,(),78-87,true,10,1,checks complete json returns empty on bad json
      TestLLMProvider.test_fallback_on_failure,method,(),90-109,true,20,1,checks fallback on failure
      TestLLMProvider.test_all_models_fail,method,(),112-119,true,8,1,checks all models fail
      TestQueryDecomposer._make_decomposer,method,"(domain_rules:Any=None) -> tuple[QueryDecomposer, LLMProvider]",125-136,false,12,2,creates decomposer
      TestQueryDecomposer.test_passthrough_strategy,method,(),139-144,true,6,1,checks passthrough strategy
      TestQueryDecomposer.test_classify_strategy,method,(),147-164,true,18,1,checks classify strategy
      TestQueryDecomposer.test_structure_strategy,method,(),167-180,true,14,1,checks structure strategy
      TestQueryDecomposer.test_split_strategy,method,(),183-196,true,14,1,checks split strategy
      TestQueryDecomposer.test_enrich_strategy,method,(),199-217,true,19,1,checks enrich strategy
      TestQueryDecomposer.test_missing_fields_from_domain_rules,method,(),220-237,true,18,1,checks missing fields from domain rules
  tests/test_env_config.py:
    functions[21]{name,kind,sig,loc,async,lines,cc,does}:
      _mock_resp,function,"(content:str) -> MagicMock",310-314,false,5,1,mock resp
      TestEnvConfigDefaults.test_default_config,method,(),20-29,false,10,1,checks default config
      TestEnvConfigDefaults.test_provider_key_map_has_all_providers,method,(),31-37,false,7,1,checks provider key map has all providers
      TestLoadDotenv.test_load_env_file,method,(tmp_path),41-65,false,25,3,checks load env file
      TestLoadDotenv.test_load_env_does_not_override_existing,method,(tmp_path),67-75,false,9,1,checks load env does not override existing
      TestLoadDotenv.test_load_env_strips_quotes,method,(tmp_path),77-93,false,17,3,checks load env strips quotes
      TestLoadDotenv.test_load_nonexistent_file,method,(),95-97,false,3,1,checks load nonexistent file
      TestGetEnvConfig.test_reads_from_env,method,(),101-125,false,25,1,checks reads from env
      TestGetEnvConfig.test_reads_from_dotenv_file,method,(tmp_path),127-143,false,17,3,checks reads from dotenv file
      TestGetEnvConfig.test_litellm_compat_env_vars,method,(),145-157,false,13,1,LiteLLM env vars (OPENAI_API_KEY etc.) are detected in providers.
      TestGetEnvConfig.test_small_model_fallback_to_old_env,method,(),159-166,false,8,1,SMALL_MODEL env var (old name) still works.
      TestGetEnvConfig.test_empty_master_key_is_none,method,(),168-171,false,4,1,checks empty master key is none
      TestGetEnvConfig.test_ollama_base_url,method,(),173-176,false,4,1,checks ollama base url
      TestCheckProviders.test_check_with_keys,method,(),180-191,false,12,1,checks check with keys
      TestCheckProviders.test_check_without_keys,method,(),193-202,false,10,2,checks check without keys
      TestAuthMiddleware.test_no_auth_when_no_master_key,method,(),208-226,false,19,1,checks no auth when no master key
      TestAuthMiddleware.test_auth_required_when_master_key_set,method,(),228-245,false,18,1,checks auth required when master key set
      TestAuthMiddleware.test_auth_with_bearer_token,method,(),247-267,false,21,1,checks auth with bearer token
      TestAuthMiddleware.test_auth_with_x_api_key,method,(),269-288,false,20,1,checks auth with x api key
      TestAuthMiddleware.test_wrong_key_rejected,method,(),290-302,false,13,1,checks wrong key rejected
      TestAuthMiddleware.teardown_method,method,(),304-307,false,4,1,Reset master key after each test.
  tests/test_validators.py:
    functions[15]{name,kind,sig,loc,async,lines,cc,does}:
      sample_schemas_yaml,function,"(tmp_path:Path) -> Path",14-45,false,32,1,sample schemas yaml
      validator,function,"(sample_schemas_yaml:Path) -> ResponseValidator",49-50,false,2,1,validator
      test_validator_loads_schemas,function,"(validator:ResponseValidator)",53-57,false,5,1,Validator loads schemas from YAML.
      test_validator_passes_valid_classification,function,"(validator:ResponseValidator)",60-67,false,8,1,Valid classification data passes validation.
      test_validator_rejects_invalid_confidence,function,"(validator:ResponseValidator)",70-77,false,8,2,"Confidence outside [0.0, 1.0] range fails validation."
      test_validator_rejects_negative_confidence,function,"(validator:ResponseValidator)",80-87,false,8,2,Negative confidence fails validation.
      test_validator_rejects_missing_required,function,"(validator:ResponseValidator)",90-95,false,6,3,Missing required fields fail validation.
      test_validator_enum_constraint,function,"(validator:ResponseValidator)",98-105,false,8,2,Invalid enum value fails validation.
      test_validator_list_length_constraint,function,"(validator:ResponseValidator)",108-115,false,8,2,List exceeding max_length fails validation.
      test_validator_list_min_length_constraint,function,"(validator:ResponseValidator)",118-125,false,8,2,Empty list below min_length fails validation.
      test_validator_valid_split,function,"(validator:ResponseValidator)",128-134,false,7,1,Valid split result passes validation.
      test_validate_or_retry_succeeds_on_second,function,"(validator:ResponseValidator)",137-151,false,15,1,validate_or_retry retries and succeeds when retry_fn returns valid data.
      test_validate_or_retry_exhausts_retries,function,"(validator:ResponseValidator)",154-163,false,10,1,validate_or_retry stops after max_retries even if still invalid.
      test_validator_unknown_schema,function,"(validator:ResponseValidator)",166-170,false,5,2,Validating against non-existent schema returns invalid.
      test_validator_nonexistent_file,function,(),173-176,false,4,1,Validator handles missing YAML file gracefully.
  tests/test_context.py:
    functions[7]{name,kind,sig,loc,async,lines,cc,does}:
      TestContextEngine.test_env_context,method,(monkeypatch),10-16,false,7,1,checks env context
      TestContextEngine.test_enrich_prompt,method,(monkeypatch),18-22,false,5,1,checks enrich prompt
      TestContextEngine.test_extra_overrides_env,method,(monkeypatch),24-28,false,5,1,checks extra overrides env
      TestContextEngine.test_missing_env_graceful,method,(),30-33,false,4,1,checks missing env graceful
      TestContextEngine.test_system_context,method,(),35-40,false,6,1,checks system context
      TestContextEngine.test_empty_sources,method,(),42-44,false,3,1,checks empty sources
      TestContextEngine.test_multiple_sources,method,(monkeypatch),46-54,false,9,1,checks multiple sources
  tests/test_codebase_indexer.py:
    functions[13]{name,kind,sig,loc,async,lines,cc,does}:
      TestCodebaseIndexerRegex.test_index_python_file,method,(tmp_path),14-40,false,27,3,checks index python file
      TestCodebaseIndexerRegex.test_index_empty_directory,method,(tmp_path),42-46,false,5,1,checks index empty directory
      TestCodebaseIndexerRegex.test_index_excludes_dirs,method,(tmp_path),48-59,false,12,4,checks index excludes dirs
      TestCodebaseIndexerRegex.test_index_respects_language_filter,method,(tmp_path),61-69,false,9,1,checks index respects language filter
      TestCodebaseIndexerRegex.test_search_finds_symbols,method,(tmp_path),71-85,false,15,2,checks search finds symbols
      TestCodebaseIndexerRegex.test_search_no_matches,method,(tmp_path),87-94,false,8,1,checks search no matches
      TestCodebaseIndexerRegex.test_get_context_for_query,method,(tmp_path),96-104,false,9,1,checks get context for query
      TestCodebaseIndexerRegex.test_get_context_no_matches,method,(tmp_path),106-113,false,8,1,checks get context no matches
      TestCodebaseIndexerRegex.test_extracts_imports,method,(tmp_path),115-125,false,11,1,checks extracts imports
      TestCodebaseIndexerRegex.test_skips_large_files,method,(tmp_path),127-134,false,8,1,checks skips large files
      TestCodeSymbolDataclass.test_code_symbol_defaults,method,(),138-142,false,5,1,checks code symbol defaults
      TestCodeSymbolDataclass.test_file_index_defaults,method,(),144-148,false,5,1,checks file index defaults
      TestCodebaseIndexerImport.test_importable_from_context,method,(),152-154,false,3,1,checks importable from context
  tests/test_user_memory.py:
    functions[8]{name,kind,sig,loc,async,lines,cc,does}:
      memory,function,"(tmp_path:Path) -> UserMemory",13-17,true,5,1,memory
      test_user_memory_add_interaction,function,"(memory:UserMemory)",21-28,true,8,1,UserMemory stores and retrieves interactions.
      test_user_memory_get_recent,function,"(memory:UserMemory)",32-42,true,11,2,UserMemory returns most recent interactions up to limit.
      test_user_memory_preferences,function,"(memory:UserMemory)",46-53,true,8,1,UserMemory stores and retrieves preferences.
      test_user_memory_preference_update,function,"(memory:UserMemory)",57-63,true,7,1,UserMemory overwrites preferences on update.
      test_user_memory_sqlite_backend,function,"(tmp_path:Path)",67-73,true,7,1,UserMemory creates SQLite file on disk.
      test_user_memory_empty_history,function,"(memory:UserMemory)",77-83,true,7,1,UserMemory returns empty list for no interactions.
      test_user_memory_clear,function,"(memory:UserMemory)",87-94,true,8,1,UserMemory.clear() removes all data.
  tests/test_structured_output.py:
    functions[6]{name,kind,sig,loc,async,lines,cc,does}:
      TestCompleteStructuredImportError.test_raises_import_error_without_instructor,method,(),31-39,true,9,1,checks raises import error without instructor
      TestCompleteStructuredWithMock.test_returns_validated_model,method,(),46-62,true,17,1,checks returns validated model
      TestCompleteStructuredWithMock.test_structured_with_system_prompt,method,(),65-78,true,14,1,checks structured with system prompt
      TestCompleteStructuredWithMock.test_structured_fallback_on_failure,method,(),81-106,true,26,1,checks structured fallback on failure
      TestCompleteStructuredMethod.test_method_exists,method,(),113-116,true,4,1,checks method exists
      TestCompleteStructuredMethod.test_all_models_fail_raises_runtime_error,method,(),119-132,true,14,1,When instructor is available but all models fail.
  tests/test_v2_architecture.py:
    functions[43]{name,kind,sig,loc,async,lines,cc,does}:
      TestLLMProvider.test_init_with_config,method,(),34-38,false,5,1,checks init with config
      TestLLMProvider.test_complete_success,method,(),41-52,true,12,1,checks complete success
      TestLLMProvider.test_complete_with_system_prompt,method,(),55-69,true,15,1,checks complete with system prompt
      TestLLMProvider.test_complete_fallback,method,(),72-92,true,21,1,checks complete fallback
      TestLLMProvider.test_complete_all_fail,method,(),95-101,true,7,1,checks complete all fail
      TestLLMProvider.test_complete_json_success,method,(),104-116,true,13,1,checks complete json success
      TestLLMProvider.test_parse_json_direct,method,(),118-120,false,3,1,checks parse json direct
      TestLLMProvider.test_parse_json_markdown_block,method,(),122-125,false,4,1,checks parse json markdown block
      TestLLMProvider.test_parse_json_embedded,method,(),127-130,false,4,1,checks parse json embedded
      TestLLMProvider.test_parse_json_invalid,method,(),132-134,false,3,1,checks parse json invalid
      TestQueryDecomposer._make_decomposer,method,"(llm_response:str='{\"intent\": \"deploy\", \"confidence\": 0.9, \"domain\": \"devops\"}')",142-167,false,26,1,creates decomposer
      TestQueryDecomposer.test_passthrough_strategy,method,(),170-175,true,6,1,checks passthrough strategy
      TestQueryDecomposer.test_classify_strategy,method,(),178-203,true,26,1,checks classify strategy
      TestQueryDecomposer.test_structure_strategy,method,(),206-219,true,14,1,checks structure strategy
      TestQueryDecomposer.test_split_strategy,method,(),222-237,true,16,1,checks split strategy
      TestQueryDecomposer.test_enrich_strategy,method,(),240-253,true,14,1,checks enrich strategy
      TestQueryDecomposer.test_match_domain_rule_by_keyword,method,(),255-260,false,6,1,checks match domain rule by keyword
      TestQueryDecomposer.test_match_domain_rule_by_intent,method,(),262-267,false,6,1,checks match domain rule by intent
      TestQueryDecomposer.test_no_domain_rule_match,method,(),269-273,false,5,1,checks no domain rule match
      TestQueryDecomposer.test_find_missing_fields,method,(),275-286,false,12,1,checks find missing fields
      TestQueryDecomposer.test_classify_failure_graceful,method,(),289-296,true,8,1,checks classify failure graceful
      TestDomainRule.test_defaults,method,(),304-309,false,6,1,checks defaults
      TestDomainRule.test_full_rule,method,(),311-323,false,13,1,checks full rule
      TestPreLLMConfig.test_defaults,method,(),331-336,false,6,1,checks defaults
      TestPreLLMConfig.test_custom_config,method,(),338-347,false,10,1,checks custom config
      TestPreLLMCore.test_init_default,method,(),355-358,false,4,1,checks init default
      TestPreLLMCore.test_init_with_config,method,(),360-366,false,7,1,checks init with config
      TestPreLLMCore.test_full_pipeline,method,(),369-408,true,40,1,checks full pipeline
      TestPreLLMCore.test_decompose_only,method,(),411-439,true,29,1,checks decompose only
      TestPreLLMCore.test_passthrough_strategy,method,(),442-457,true,16,1,checks passthrough strategy
      TestPreLLMCore.test_audit_log_empty,method,(),459-461,false,3,1,checks audit log empty
      TestPreLLMCore.test_large_llm_failure,method,(),464-477,true,14,1,checks large llm failure
      TestPreLLMConfigLoading.test_load_yaml_config,method,(tmp_path),485-506,false,22,1,checks load yaml config
      TestPreLLMConfigLoading.test_load_empty_yaml,method,(tmp_path),508-515,false,8,1,checks load empty yaml
      TestPreLLMConfigLoading.test_load_shipped_config,method,(),517-523,false,7,2,checks load shipped config
      TestProcessChainV2.test_chain_with_v2_engine_dry_run,method,(),532-568,true,37,2,checks chain with v2 engine dry run
      TestProcessChainV2.test_chain_per_step_strategy,method,(),571-611,true,41,1,checks chain per step strategy
      TestDecompositionResult.test_defaults,method,(),619-626,false,8,1,checks defaults
      TestDecompositionResult.test_full_result,method,(),628-640,false,13,1,checks full result
      TestPreLLMResponse.test_defaults,method,(),644-649,false,6,1,checks defaults
      TestPreLLMResponse.test_with_decomposition,method,(),651-664,false,14,1,checks with decomposition
      TestDecompositionStrategy.test_all_strategies,method,(),668-673,false,6,1,checks all strategies
      TestDecompositionStrategy.test_from_string,method,(),675-677,false,3,1,checks from string
  tests/test_models.py:
    functions[21]{name,kind,sig,loc,async,lines,cc,does}:
      TestModelDefaults.test_llm_provider_config_defaults,method,(),30-34,false,5,1,checks llm provider config defaults
      TestModelDefaults.test_prellm_config_defaults,method,(),36-43,false,8,1,checks prellm config defaults
      TestModelDefaults.test_response_defaults,method,(),45-49,false,5,1,checks response defaults
      TestModelDefaults.test_decomposition_result_defaults,method,(),51-57,false,7,1,checks decomposition result defaults
      TestModelDefaults.test_classification_result,method,(),59-62,false,4,1,checks classification result
      TestModelDefaults.test_structure_result,method,(),64-67,false,4,1,checks structure result
      TestModelDefaults.test_audit_entry,method,(),69-75,false,7,1,checks audit entry
      TestDomainRules.test_rule_with_all_fields,method,(),79-89,false,11,1,checks rule with all fields
      TestDomainRules.test_rule_keyword_matching,method,(),91-94,false,4,2,checks rule keyword matching
      TestDomainRules.test_rule_no_match,method,(),96-99,false,4,2,checks rule no match
      TestDecompositionStrategy.test_all_strategies_exist,method,(),103-109,false,7,2,checks all strategies exist
      TestDecompositionStrategy.test_strategy_from_string,method,(),111-113,false,3,1,checks strategy from string
      TestConfigLoading._write_yaml,method,"(data:dict) -> str",117-121,false,5,1,logs yaml
      TestConfigLoading.test_load_minimal_config,method,(),123-128,false,6,1,checks load minimal config
      TestConfigLoading.test_load_with_models,method,(),130-140,false,11,1,checks load with models
      TestConfigLoading.test_load_with_domain_rules,method,(),142-152,false,11,1,checks load with domain rules
      TestConfigLoading.test_load_with_prompts,method,(),154-164,false,11,1,checks load with prompts
      TestConfigLoading.test_load_empty_config,method,(),166-170,false,5,1,checks load empty config
      TestConfigLoading.test_shipped_config_loads,method,(),172-178,false,7,2,checks shipped config loads
      TestProcessModels.test_process_step_with_strategy,method,(),182-190,false,9,1,checks process step with strategy
      TestProcessModels.test_process_config,method,(),192-201,false,10,1,checks process config
  tests/test_v3_architecture.py:
    functions[15]{name,kind,sig,loc,async,lines,cc,does}:
      tmp_configs,function,"(tmp_path:Path) -> dict[str, Path]",34-97,false,64,2,Create all config files needed for v0.3 integration tests.
      mock_small_llm,function,() -> LLMProvider,101-108,false,8,1,mock small llm
      mock_large_llm,function,() -> LLMProvider,112-116,false,5,1,mock large llm
      test_agents_integration_full_pipeline,function,"(tmp_configs, mock_small_llm, mock_large_llm)",124-151,true,28,1,"Full integration: PreprocessorAgent → ExecutorAgent with real configs."
      test_agents_integration_structure_pipeline,function,"(tmp_configs, mock_small_llm, mock_large_llm)",155-190,true,36,1,Integration with multi-step structure pipeline.
      test_agents_integration_dual_agent_full,function,"(tmp_configs, mock_small_llm, mock_large_llm)",194-218,true,25,3,Integration with full dual-agent pipeline (4 steps including algo).
      test_preprocessor_independent_of_executor,function,"(tmp_configs, mock_small_llm)",226-242,true,17,1,PreprocessorAgent works without any ExecutorAgent.
      test_executor_independent_of_preprocessor,function,(mock_large_llm),246-251,true,6,1,"ExecutorAgent works with a raw string, no preprocessing needed."
      test_executor_with_schema_validation,function,"(tmp_configs, mock_large_llm)",259-269,true,11,1,ExecutorAgent validates JSON responses against schema.
      test_pipeline_with_validator_integration,function,"(tmp_configs, mock_small_llm)",273-292,true,20,1,Pipeline steps produce data that passes schema validation.
      test_passthrough_pipeline_integration,function,"(tmp_configs, mock_small_llm, mock_large_llm)",300-320,true,21,1,Passthrough pipeline forwards query directly to executor.
      test_registry_validates_against_pipeline_needs,function,(tmp_configs),327-331,false,5,1,All prompts referenced by pipelines exist in the registry.
      test_all_configs_load_without_error,function,(tmp_configs),334-340,false,7,1,All YAML configs load without parsing errors.
      test_preprocessor_tracks_pipeline_steps,function,"(tmp_configs, mock_small_llm)",348-367,true,20,2,PreprocessorAgent decomposition tracks which steps executed (for cost attributio...
      test_executor_tracks_model_used,function,(mock_large_llm),371-375,true,5,1,ExecutorAgent records which model was used (for cost attribution).
  tests/test_integration.py:
    functions[22]{name,kind,sig,loc,async,lines,cc,does}:
      TestYAMLConfigLoading._write_yaml,method,"(data:dict) -> str",28-32,false,5,1,logs yaml
      TestYAMLConfigLoading.test_load_minimal_config,method,(),34-39,false,6,1,checks load minimal config
      TestYAMLConfigLoading.test_load_full_config,method,(),41-57,false,17,1,checks load full config
      TestYAMLConfigLoading.test_load_empty_config,method,(),59-63,false,5,1,checks load empty config
      TestYAMLConfigLoading.test_configs_rules_yaml,method,(),65-71,false,7,2,Test that the shipped configs/rules.yaml loads correctly.
      TestAnalyzeOnly.test_production_deploy_detected,method,(),77-80,false,4,1,checks production deploy detected
      TestAnalyzeOnly.test_db_delete_detected,method,(),82-85,false,4,1,checks db delete detected
      TestAnalyzeOnly.test_safe_query_passes,method,(),87-92,false,6,1,checks safe query passes
      TestAnalyzeOnly.test_short_devops_query_flagged,method,(),94-97,false,4,1,checks short devops query flagged
      TestAnalyzeOnly.test_scale_operation_detected,method,(),99-102,false,4,1,checks scale operation detected
      TestAnalyzeOnly.test_config_change_detected,method,(),104-107,false,4,1,checks config change detected
      TestAnalyzeOnly.test_polish_migration_detected,method,(),109-112,false,4,1,checks polish migration detected
      TestProcessChainDryRun._make_chain,method,"(steps:list[ProcessStep]) -> ProcessChain",118-121,false,4,1,creates chain
      TestProcessChainDryRun.test_simple_chain_dry_run,method,(),124-132,true,9,2,checks simple chain dry run
      TestProcessChainDryRun.test_chain_with_manual_approval_pauses,method,(),135-145,true,11,1,checks chain with manual approval pauses
      TestProcessChainDryRun.test_chain_with_approval_callback,method,(),148-165,true,18,1,checks chain with approval callback
      TestProcessChainDryRun.test_chain_dependency_failure,method,(),168-174,true,7,1,checks chain dependency failure
      TestProcessChainDryRun.test_chain_context_injection,method,(monkeypatch),177-187,true,11,1,checks chain context injection
      TestProcessChainDryRun.test_chain_extra_context,method,(),190-195,true,6,1,checks chain extra context
      TestProcessChainDryRun.test_chain_timing,method,(),198-205,true,8,1,checks chain timing
      TestProcessChainDryRun.test_chain_audit_trail,method,(),208-222,true,15,1,checks chain audit trail
      TestDeployConfig.test_deploy_yaml_loads,method,(),228-239,false,12,2,checks deploy yaml loads
  tests/test_prompt_registry.py:
    functions[14]{name,kind,sig,loc,async,lines,cc,does}:
      sample_prompts_yaml,function,"(tmp_path:Path) -> Path",15-53,false,39,1,Create a temporary prompts.yaml for testing.
      registry,function,"(sample_prompts_yaml:Path) -> PromptRegistry",57-58,false,2,1,registry
      test_prompt_registry_loads_yaml,function,"(registry:PromptRegistry)",61-69,false,9,1,Registry loads all prompts from YAML file.
      test_prompt_registry_get_with_variables,function,"(registry:PromptRegistry)",72-76,false,5,1,Registry renders Jinja2 variables in prompts.
      test_prompt_registry_get_with_default,function,"(registry:PromptRegistry)",79-82,false,4,1,Registry uses Jinja2 default filter when variable not provided.
      test_prompt_registry_get_conditional,function,"(registry:PromptRegistry)",85-91,false,7,1,Registry handles Jinja2 conditionals.
      test_prompt_registry_missing_prompt_raises,function,"(registry:PromptRegistry)",94-97,false,4,1,Registry raises PromptNotFoundError for missing prompts.
      test_prompt_registry_validate_all_required,function,"(registry:PromptRegistry)",100-103,false,4,1,Registry validates that all required prompts exist.
      test_prompt_registry_validate_missing_required,function,"(tmp_path:Path)",106-114,false,9,2,Registry reports missing required prompts.
      test_prompt_registry_get_entry,function,"(registry:PromptRegistry)",117-123,false,7,1,Registry returns full PromptEntry with metadata.
      test_prompt_registry_caching,function,"(registry:PromptRegistry)",126-135,false,10,1,Registry loads YAML only once (lazy loading).
      test_prompt_registry_register_programmatic,function,"(registry:PromptRegistry)",138-143,false,6,1,Registry supports programmatic prompt registration.
      test_prompt_registry_nonexistent_file,function,(),146-149,false,4,1,Registry handles missing YAML file gracefully.
      test_prompt_registry_default_path,function,(),152-157,false,6,1,Registry uses default configs/prompts.yaml path.
  tests/test_pipeline.py:
    functions[16]{name,kind,sig,loc,async,lines,cc,does}:
      sample_prompts_yaml,function,"(tmp_path:Path) -> Path",23-61,false,39,1,sample prompts yaml
      sample_pipelines_yaml,function,"(tmp_path:Path) -> Path",65-120,false,56,1,sample pipelines yaml
      registry,function,"(sample_prompts_yaml:Path) -> PromptRegistry",124-125,false,2,1,registry
      mock_llm,function,() -> LLMProvider,129-138,false,10,1,Create a mock LLMProvider that returns predictable JSON.
      _make_pipeline,function,"(registry:PromptRegistry, mock_llm:LLMProvider, steps:list[dict], name:str='test') -> PromptPipeline",141-151,false,11,2,creates pipeline
      test_pipeline_sequential_execution,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",155-169,true,15,1,"Pipeline executes steps sequentially, propagating state."
      test_pipeline_conditional_step_skip,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",173-192,true,20,1,Pipeline skips steps whose condition evaluates to False.
      test_pipeline_conditional_step_executes,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",196-215,true,20,1,Pipeline executes steps whose condition evaluates to True.
      test_pipeline_algo_step_execution,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",219-234,true,16,1,Pipeline executes algorithmic (non-LLM) steps.
      test_pipeline_llm_step_execution,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",238-248,true,11,2,Pipeline LLM steps call complete_json on small_llm.
      test_pipeline_state_propagation,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",252-272,true,21,1,State from earlier steps is available to later steps.
      test_pipeline_from_yaml_config,function,"(sample_pipelines_yaml:Path, registry:PromptRegistry, mock_llm:LLMProvider)",276-291,true,16,1,Pipeline loads correctly from YAML file.
      test_pipeline_from_yaml_missing_pipeline,function,"(sample_pipelines_yaml:Path)",294-300,false,7,1,Loading a non-existent pipeline raises KeyError.
      test_pipeline_missing_prompt_error,function,"(mock_llm:LLMProvider)",304-313,true,10,2,Pipeline with a prompt not in registry fails gracefully.
      test_pipeline_custom_validator,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",317-333,true,17,1,Pipeline supports custom algorithmic step handlers.
      test_pipeline_empty_passthrough,function,"(registry:PromptRegistry, mock_llm:LLMProvider)",337-345,true,9,1,Empty pipeline (passthrough) returns state with just query and context.
  htmlcov/coverage_html_cb_dd2e7eb5.js:
    functions[6]{name,kind,sig,loc,async,lines,cc,does}:
      debounce,function,"(callback, wait)",11-19,false,9,1,debounce
      checkVisible,function,(element),21-26,false,6,1,checks visible
      on_click,function,"(sel, fn)",28-33,false,6,1,handles click
      getCellValue,function,(row),36-48,false,13,1,retrieves cell value
      rowComparator,function,"(rowA, rowB)",50-57,false,8,1,row comparator
      sortColumn,function,(th),59-110,false,52,1,sorts column
  prellm/chains/process_chain.py:
    functions[10]{name,kind,sig,loc,async,lines,cc,does}:
      ProcessChain.__init__,method,"(config_path:Any=None, config:Any=None, guard_config_path:Any=None, guard:Any=None, engine:Any=None)",56-80,false,25,5,creates
      ProcessChain.execute,method,"(extra_context:Any=None, approval_callback:Any=None, dry_run:bool=False) -> ProcessResult",82-136,true,55,6,Execute the full process chain.
      ProcessChain._execute_step,method,"(step:ProcessStep, ctx:dict[str,str], approval_callback:Any, dry_run:bool) -> StepResult",138-175,true,38,5,Execute a single step in the chain.
      ProcessChain._check_dependencies,method,"(step:ProcessStep) -> str | None",177-183,false,7,4,Check that all step dependencies are completed.
      ProcessChain._handle_approval,method,"(step_result:StepResult, step:ProcessStep, enriched_prompt:str, approval_callback:Any) -> bool",185-211,true,27,4,Handle manual approval gate.
      ProcessChain._run_dry_run,method,"(step_result:StepResult, step:ProcessStep, enriched_prompt:str, step_start:float) -> None",213-225,true,13,3,"Dry-run: analyze without calling LLM."
      ProcessChain._run_engine,method,"(step_result:StepResult, step:ProcessStep, enriched_prompt:str, ctx:dict[str,str]) -> None",227-255,true,29,7,"Execute step through v0.3 pipeline, v0.2 engine, or v0.1 guard."
      ProcessChain.get_audit_log,method,"() -> list[dict[str, Any]]",257-258,false,2,2,retrieves audit log
      ProcessChain._audit_step,method,"(step_name:str, prompt:str, response:str) -> None",260-268,false,9,2,audit step
      ProcessChain._load_process_config,method,"(path:Path) -> ProcessConfig",271-284,false,14,3,retrieves process config
  prellm/context/user_memory.py:
    functions[9]{name,kind,sig,loc,async,lines,cc,does}:
      UserMemory.__init__,method,"(backend:str='sqlite', path:Any=_DEFAULT_DB_PATH)",41-52,false,12,3,creates
      UserMemory._init_sqlite,method,() -> None,54-75,false,22,1,Initialize SQLite database and tables.
      UserMemory._init_chromadb,method,() -> None,77-109,false,33,2,Initialize ChromaDB client and collection.
      UserMemory.add_interaction,method,"(query:str, response_summary:str, metadata:Any=None) -> None",111-135,true,25,6,Record a user interaction.
      UserMemory.get_recent_context,method,"(query:str, limit:int=5) -> list[dict[str, Any]]",137-180,true,44,12,Get the most recent/relevant interactions.
      UserMemory.get_user_preferences,method,"() -> dict[str, str]",182-188,true,7,4,Get all learned user preferences.
      UserMemory.set_preference,method,"(key:str, value:str) -> None",190-199,true,10,3,Set a user preference.
      UserMemory.clear,method,() -> None,201-219,true,19,6,Clear all stored data (for testing).
      UserMemory.close,method,() -> None,221-230,false,10,3,Close the database connection.
  prellm/context/codebase_indexer.py:
    functions[12]{name,kind,sig,loc,async,lines,cc,does}:
      CodebaseIndexer.__init__,method,"(languages:Any=None)",79-88,false,10,1,Initialize indexer.
      CodebaseIndexer._check_tree_sitter,method,() -> bool,91-98,false,8,2,Check if tree-sitter is available.
      CodebaseIndexer.index_directory,method,"(root:Any, exclude_dirs:Any=None, max_file_size_kb:int=500) -> CodebaseIndex",100-152,false,53,11,Index all source files in a directory.
      CodebaseIndexer._index_file,method,"(file_path:Path, language:str) -> FileIndex",154-173,false,20,2,Index a single file.
      CodebaseIndexer._extract_with_tree_sitter,method,"(content:str, language:str, file_path:str) -> list[CodeSymbol]",175-190,false,16,3,Extract symbols using tree-sitter AST parsing.
      CodebaseIndexer._get_parser,method,"(language:str) -> Any",192-207,false,16,3,Get or create a tree-sitter parser for the given language.
      CodebaseIndexer._walk_tree,method,"(node:Any, symbols:list[CodeSymbol], file_path:str, content:str) -> None",209-238,false,30,6,Recursively walk tree-sitter AST and extract symbols.
      CodebaseIndexer._get_line,method,"(content:str, line_idx:int) -> str",241-246,false,6,2,Get a specific line from content.
      CodebaseIndexer._extract_with_regex,method,"(content:str, language:str, file_path:str) -> list[CodeSymbol]",249-304,false,56,10,"Fallback: extract symbols using regex patterns."
      CodebaseIndexer._extract_imports,method,"(content:str, language:str) -> list[str]",307-321,false,15,7,Extract import statements.
      CodebaseIndexer.search,method,"(index:CodebaseIndex, query:str, limit:int=20) -> list[CodeSymbol]",323-341,false,19,6,Search the index for symbols matching a query string.
      CodebaseIndexer.get_context_for_query,method,"(index:CodebaseIndex, query:str, max_symbols:int=10) -> str",343-357,false,15,3,Build a context string from the index for a given query.
  prellm/analyzers/bias_detector.py:
    functions[2]{name,kind,sig,loc,async,lines,cc,does}:
      BiasDetector.__init__,method,"(patterns:Any=None)",38-49,false,12,4,creates
      BiasDetector.analyze,method,"(query:str) -> AnalysisResult",51-96,false,46,11,Analyze a query for bias patterns and ambiguity.
  prellm/analyzers/context_engine.py:
    functions[8]{name,kind,sig,loc,async,lines,cc,does}:
      ContextEngine.__init__,method,"(context_sources:Any=None)",16-17,false,2,2,creates
      ContextEngine.gather,method,"() -> dict[str, str]",19-31,false,13,5,Gather all configured context into a flat dict.
      ContextEngine.enrich_prompt,method,"(prompt:str, extra:Any=None) -> str",33-43,false,11,3,"Substitute {VARIABLE} placeholders in a prompt with gathered context."
      ContextEngine._gather_env,method,"(keys:list[str]) -> dict[str, str]",46-52,false,7,3,gather env
      ContextEngine._gather_git,method,"(fields:list[str]) -> dict[str, str]",55-60,false,6,2,gather git
      ContextEngine._gather_git_gitpython,method,"(fields:list[str]) -> dict[str, str]",63-92,false,30,13,"Gather git info using gitpython (pip install prellm[git])."
      ContextEngine._gather_git_subprocess,method,"(fields:list[str]) -> dict[str, str]",95-115,false,21,5,"Fallback: gather git info using subprocess calls."
      ContextEngine._gather_system,method,"(fields:list[str]) -> dict[str, str]",118-131,false,14,3,gather system
  prellm/agents/preprocessor.py:
    functions[4]{name,kind,sig,loc,async,lines,cc,does}:
      PreprocessorAgent.__init__,method,"(small_llm:LLMProvider, registry:PromptRegistry, pipeline:PromptPipeline, context_engine:Any=None)",50-60,false,11,2,creates
      PreprocessorAgent.preprocess,method,"(query:str, user_context:Any=None, pipeline_name:Any=None) -> PreprocessResult",62-98,true,37,3,Preprocess a query and return structured input for the Executor.
      PreprocessorAgent._extract_executor_input,method,"(query:str, pipeline_result:PipelineResult) -> str",101-115,false,15,5,Extract the best executor input from pipeline state.
      PreprocessorAgent._extract_confidence,method,"(pipeline_result:PipelineResult) -> float",118-123,false,6,2,Extract confidence score from classification step if available.
  prellm/agents/executor.py:
    functions[3]{name,kind,sig,loc,async,lines,cc,does}:
      ExecutorAgent.__init__,method,"(large_llm:LLMProvider, response_validator:Any=None, response_schema_name:Any=None)",46-54,false,9,1,creates
      ExecutorAgent.execute,method,"(executor_input:str, system_prompt:str='') -> ExecutorResult",56-100,true,45,6,Execute the task with the large LLM.
      ExecutorAgent._validate_response,method,"(content:str) -> ValidationResult | None",102-118,false,17,5,Validate response content against the configured schema.
